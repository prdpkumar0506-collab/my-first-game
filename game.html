<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bow & Arrow Fact Hunter</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #2c3e50;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            overflow: hidden;
            user-select: none;
        }

        /* --- SCREENS --- */
        .screen {
            width: 400px;
            height: 600px;
            border: 5px solid #fff;
            border-radius: 12px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
            display: none; 
        }

        .active { display: block; }

        /* --- MAIN MENU --- */
        #main-menu {
            background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
            text-align: center;
            padding-top: 40px;
        }
        
        .menu-btn {
            display: block;
            width: 80%;
            margin: 12px auto;
            padding: 12px;
            font-size: 18px;
            background: rgba(255,255,255,0.1);
            color: white;
            border: 2px solid white;
            border-radius: 30px;
            cursor: pointer;
            transition: 0.2s;
        }
        .menu-btn:hover { background: white; color: #1e3c72; transform: scale(1.05); }

        /* --- GAME BOARD --- */
        #game-board {
            background: linear-gradient(to bottom, #87CEEB 60%, #a2d149 60%);
        }

        #score-board {
            position: absolute; top: 10px; right: 15px;
            color: #333; font-size: 20px; font-weight: bold; z-index: 5;
        }
        #category-label {
            position: absolute; top: 10px; left: 15px;
            color: #555; font-size: 14px; font-weight: bold; text-transform: uppercase;
        }

        /* --- THE OBSTACLE --- */
        #obstacle {
            width: 100px;
            height: 20px;
            background: repeating-linear-gradient(
                45deg,
                #606dbc,
                #606dbc 10px,
                #465298 10px,
                #465298 20px
            ); 
            position: absolute;
            top: 250px; 
            left: 150px;
            border-radius: 5px;
            border: 2px solid #333;
            box-shadow: 0 5px 5px rgba(0,0,0,0.3);
            z-index: 4;
        }

        /* --- THE BALLOON --- */
        .balloon {
            width: 70px; height: 85px;
            background-color: #ff4d4d;
            border-radius: 50% 50% 50% 50% / 40% 40% 60% 60%;
            position: absolute;
            top: 50px; left: 165px;
            box-shadow: inset -5px -5px 10px rgba(0,0,0,0.1);
            z-index: 2;
            transition: transform 0.1s;
        }
        .balloon::after {
            content: ""; position: absolute;
            bottom: -15px; left: 50%; transform: translateX(-50%);
            width: 2px; height: 15px; background-color: #555;
        }

        .myth-balloon {
            background-color: #111 !important;
            box-shadow: 0 0 20px #fff !important; 
            border: 2px solid white;
        }

        /* --- THE ARROW (UPDATED) --- */
        #arrow {
            position: absolute; 
            left: 50%; /* Center horizontally */
            transform: translateX(-50%) rotate(-45deg); /* Center and point UP */
            bottom: 10px;
            font-size: 50px; /* Big emoji size */
            display: none; 
            z-index: 1;
            line-height: 1;
        }

        /* --- MODAL --- */
        #modal-overlay {
            display: none;
            position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background-color: rgba(0,0,0,0.8);
            z-index: 10;
            align-items: center; justify-content: center;
        }

        #modal-content {
            background-color: white; color: #333;
            padding: 30px; border-radius: 10px;
            text-align: center; width: 80%;
            border: 4px solid #fff;
            animation: popIn 0.3s ease;
        }

        .myth-mode #modal-content {
            background-color: #222;
            color: #fff;
            border-color: #ff4d4d;
        }

        .action-btn {
            background-color: #e67e22; color: white;
            border: none; padding: 10px 20px;
            border-radius: 5px; font-size: 16px; cursor: pointer; margin: 5px;
        }
        .home-btn { background-color: #6c757d; }
        
        @keyframes popIn {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            100% { transform: translateX(0); }
        }
        .shake { animation: shake 0.2s; }

        h1 { color: white; text-shadow: 2px 2px #333; margin-bottom: 20px;}
        .instructions { margin-top: 15px; font-size: 14px; color: #aaa; }

    </style>
</head>
<body>

    <div id="main-menu" class="screen active">
        <h1>üèπ Knowledge Hunter</h1>
        <p>Choose your target:</p>
        <button class="menu-btn" onclick="startGame('space')">ü™ê Space</button>
        <button class="menu-btn" onclick="startGame('animals')">ü¶Å Animals</button>
        <button class="menu-btn" onclick="startGame('history')">üìú History</button>
        <button class="menu-btn" onclick="startGame('coding')">üíª Coding</button>
    </div>

    <div id="game-board" class="screen">
        <div id="category-label">Topic: <span id="current-topic"></span></div>
        <div id="score-board">Score: <span id="score-val">0</span></div>
        
        <div id="obstacle"></div>

        <div id="balloon" class="balloon"></div>
        
        <div id="arrow">üèπ</div>

        <div id="modal-overlay">
            <div id="modal-content">
                <h3 id="modal-title" style="margin-top:0;">DIRECT HIT!</h3>
                <div id="fact-text" style="font-size: 18px; line-height: 1.5; white-space: pre-wrap;">Fact goes here...</div>
                <br>
                <button class="action-btn" onclick="nextLevel()">Next Arrow</button>
                <button class="action-btn home-btn" onclick="goHome()">Main Menu</button>
            </div>
        </div>
    </div>

    <div class="instructions">Press <strong>SPACEBAR</strong> or <strong>TAP</strong> to shoot!</div>

    <script>
        // --- 1. DATABASES ---
        const factsDB = {
            space: [
                "A day on Venus is longer than a year on Venus.",
                "Space is completely silent.",
                "Neutron stars can spin 600 times per second.",
                "One million Earths could fit inside the Sun.",
                "The sunset on Mars appears blue.",
                "There is a planet made of diamonds (55 Cancri e).",
                "The footprints on the Moon will be there for 100 million years.",
                "Saturn could float in water because it is less dense than water."
            ],
            animals: [
                "Octopuses have three hearts.",
                "Butterflies taste with their feet.",
                "A group of flamingos is called a 'flamboyance'.",
                "Sloths can hold their breath longer than dolphins.",
                "A snail can sleep for three years.",
                "Elephants are the only animal that can't jump.",
                "A shrimp's heart is in its head."
            ],
            history: [
                "The shortest war in history lasted 38 minutes.",
                "Ancient Romans used urine to whiten their teeth.",
                "Ketchup was sold in the 1830s as medicine.",
                "Napoleon was once attacked by a horde of bunnies.",
                "Oxford University is older than the Aztec Empire.",
                "Woolly mammoths were still alive when the Pyramids were built."
            ],
            coding: [
                "The first computer bug was an actual moth stuck in a relay.",
                "The first computer mouse was made of wood.",
                "Wi-Fi doesn't stand for 'Wireless Fidelity'.",
                "There are over 700 programming languages.",
                "The first programmer in history was a woman, Ada Lovelace.",
                "Python is named after the comedy group Monty Python."
            ]
        };

        const mythsDB = [
            "MYTH: Bulls hate the color red.\nTRUTH: Bulls are colorblind. They react to the movement of the cape.",
            "MYTH: We only use 10% of our brains.\nTRUTH: We use virtually every part of the brain.",
            "MYTH: Goldfish have a 3-second memory.\nTRUTH: Goldfish can remember things for months!",
            "MYTH: The Great Wall of China is visible from space.\nTRUTH: It is not visible to the naked eye from orbit.",
            "MYTH: Bats are blind.\nTRUTH: Bats can actually see quite well.",
            "MYTH: Napoleon was short.\nTRUTH: He was average height for a Frenchman of his time.",
            "MYTH: Sugar makes kids hyper.\nTRUTH: Studies show no link between sugar and hyperactivity."
        ];

        // --- CONFIG ---
        const boardHeight = 600;
        const arrowSpeed = 15;
        let balloonSpeed = 3;
        
        // OBSTACLE CONFIG
        const obstacleWidth = 100;
        let obstacleSpeed = 4;

        // --- DOM ELEMENTS ---
        const menuScreen = document.getElementById('main-menu');
        const gameScreen = document.getElementById('game-board');
        const balloon = document.getElementById('balloon');
        const obstacle = document.getElementById('obstacle');
        const arrow = document.getElementById('arrow');
        const modal = document.getElementById('modal-overlay');
        const modalTitle = document.getElementById('modal-title');
        const factText = document.getElementById('fact-text');
        const scoreSpan = document.getElementById('score-val');
        const topicLabel = document.getElementById('current-topic');

        // --- VARIABLES ---
        let gameRunning = false;
        let isShooting = false;
        let currentCategory = 'space';
        
        let balloonX = 165;
        let balloonDir = 1;
        
        let obstacleX = 150;
        let obstacleDir = -1; 
        
        let arrowY = 10; 
        let score = 0;
        let animationId;
        
        let isMythBalloon = false; 

        // --- MENU FUNCTIONS ---
        function startGame(category) {
            currentCategory = category;
            topicLabel.innerText = category.toUpperCase();
            menuScreen.classList.remove('active');
            gameScreen.classList.add('active');
            score = 0;
            scoreSpan.innerText = "0";
            balloonSpeed = 3;
            gameRunning = true;
            resetArrow();
            spawnBalloon(); 
            loop();
        }

        function goHome() {
            gameRunning = false;
            cancelAnimationFrame(animationId);
            modal.style.display = 'none';
            gameScreen.classList.remove('active');
            menuScreen.classList.add('active');
        }

        // --- GAME LOOP ---
        function loop() {
            if (!gameRunning) return;

            // 1. Move Balloon
            let currentSpeed = isMythBalloon ? (balloonSpeed * 1.5) : balloonSpeed;
            balloonX += currentSpeed * balloonDir;
            if (balloonX >= 330 || balloonX <= 0) {
                balloonDir *= -1;
            }
            balloon.style.left = balloonX + 'px';

            // 2. Move Obstacle
            obstacleX += obstacleSpeed * obstacleDir;
            if (obstacleX >= 300 || obstacleX <= 0) {
                obstacleDir *= -1;
            }
            obstacle.style.left = obstacleX + 'px';

            // 3. Move Arrow
            if (isShooting) {
                arrowY += arrowSpeed;
                arrow.style.bottom = arrowY + 'px';

                // CHECK OBSTACLE COLLISION
                if (checkCollision(arrow, obstacle)) {
                    hitObstacle();
                }
                // CHECK BALLOON COLLISION
                else if (checkCollision(arrow, balloon)) {
                    pop();
                }
                
                // Miss
                if (arrowY > boardHeight) {
                    resetArrow(); 
                }
            }

            animationId = requestAnimationFrame(loop);
        }

        // --- ACTIONS ---
        function shoot() {
            if (!isShooting && gameRunning) {
                isShooting = true;
                arrow.style.display = 'block'; 
            }
        }

        function hitObstacle() {
            obstacle.classList.add('shake');
            setTimeout(() => obstacle.classList.remove('shake'), 200);
            resetArrow();
        }

        function checkCollision(el1, el2) {
            const r1 = el1.getBoundingClientRect();
            const r2 = el2.getBoundingClientRect();
            // Reduce hitbox slightly for better feel
            return !(r1.right < r2.left + 5 || 
                     r1.left > r2.right - 5 || 
                     r1.bottom < r2.top + 5 || 
                     r1.top > r2.bottom - 5);
        }

        function pop() {
            gameRunning = false;
            balloon.style.display = 'none'; 
            arrow.style.display = 'none';   
            
            score++;
            scoreSpan.innerText = score;

            if (isMythBalloon) {
                const randomMyth = mythsDB[Math.floor(Math.random() * mythsDB.length)];
                modal.classList.add('myth-mode');
                modalTitle.innerText = "MYTH BUSTED!";
                modalTitle.style.color = "#ff4d4d"; 
                factText.innerText = randomMyth;
            } else {
                const categoryFacts = factsDB[currentCategory];
                const randomFact = categoryFacts[Math.floor(Math.random() * categoryFacts.length)];
                modal.classList.remove('myth-mode');
                modalTitle.innerText = "DID YOU KNOW?";
                modalTitle.style.color = "#2c3e50";
                factText.innerText = randomFact;
            }
            modal.style.display = 'flex';
        }

        function nextLevel() {
            modal.style.display = 'none';
            resetArrow();
            spawnBalloon(); 
            
            if (!isMythBalloon) {
                balloonSpeed += 0.2; 
                if(obstacleSpeed < 8) obstacleSpeed += 0.2; 
            }
            
            gameRunning = true;
            loop();
        }

        function spawnBalloon() {
            const randomChance = Math.random();
            if (randomChance < 0.30) {
                isMythBalloon = true;
                balloon.classList.add('myth-balloon'); 
                balloon.style.backgroundColor = ""; 
            } else {
                isMythBalloon = false;
                balloon.classList.remove('myth-balloon');
                const colors = ['#ff4d4d', '#ff9f43', '#1dd1a1', '#54a0ff', '#5f27cd'];
                balloon.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            }
            balloon.style.display = 'block';
        }

        function resetArrow() {
            isShooting = false;
            arrowY = 10; 
            arrow.style.bottom = arrowY + 'px';
            arrow.style.display = 'none'; 
        }

        // --- CONTROLS ---
        document.addEventListener('keydown', (e) => {
            if (e.code === "Space") shoot();
        });
        document.addEventListener('touchstart', (e) => {
             if(gameScreen.classList.contains('active')) shoot();
        });
        document.addEventListener('click', (e) => {
             if(gameScreen.classList.contains('active') && e.target.id === "game-board") shoot();
        });

    </script>
</body>
</html>